Vagrant box for Koha RESTful docker container
================

This repo contains a git fork of Biblibre's Koha-restful API.

Upstream: http://git.biblibre.com/biblibre/koha-restful.git

Origin:   http://github.com/digibib/koha-restful.git

## Installation

Vagrant box can be started with:

`vagrant up`

and enter with

`vagrant ssh`

## Usage (Inside Vagrant Box)

Docker container can be built with:

`sudo docker build -t [imagetag] /vagrant`

and run with:

`sudo docker run -it --name koha_restful [imagetag] /bin/sh`

## Environment variables

`KOHA_INSTANCE=name of instance`
`KOHA_SRC=path_to_koha_installation`

## Local Volumes

Exposed volumes are:

$KOHA_SRC/Koha/REST
$KOHA_SRC/REST/t/rest

If you want to link to local code (volume) on your host:

`sudo docker run -it --name koha_restful -v /somelocalpath:containerpath [imagetag] /bin/sh`

However, koha restful needs a Koha installation to make sense.

Downloading koha image

`sudo docker pull digibib/koha`

Now, a koha container can be set up to link against the Koha RESTful container 

`sudo docker run -d --name koha_container --volumes-from=koha_restful digibib/koha`

You should now enjoy access to Koha RESTful inside koha container

## Testing

Running tests inside koha_container:

`sudo docker exec koha_container 'cd /usr/share/koha && \
  KOHA_CONF=/etc/koha/sites/name/koha-conf.xml \
  prove -Ilib t/rest'`

